const reviewsJson = {
  "0": {
    "comment": "Muchos gracias Karen! I really enjoy the variety in each and every class. It really helps me stay focused and increases my learning abilities. It is always a pleasure and I look forward to many more classes :)",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"T048579360\"><img src=\"https://imagesavatar-static01.italki.com/T048579360_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Cassandra Larson</div><div class=\"review-user-courses\">16 <span>Lessons</span></div></section></section><section class=\"review-time\">Nov 4, 2019</section>"
  },
  "1": {
    "comment": "\"Haz Lo Que Se Te De La Gana\" y \"se me antoja\" son dos expresiones que Karen me ensena hoy, segun ella, esos son muy populares y comúnmente utilizado en los países de habla hispana. Ella pasa 10-15 minutos en me preguntando various ejemplos a los dos expresiones, tengo que conteslarle con ejemplos de la vida real usando esos expresiones. Eso es lo que me gusta de Karen!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\"><img src=\"https://d1m3ds7i7t710d.cloudfront.net/orion/static/media/default.13c19308.svg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Quang Do</div><div class=\"review-user-courses\">28 <span>Lessons</span></div></section></section><section class=\"review-time\">Sep 17, 2019</section>"
  },
  "2": {
    "comment": "En serio, estoy disfrutando muchissimo mis leciones con Karen - una maestra muy amena y ayudante!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"4T061539780\"><img src=\"https://imagesavatar-static01.italki.com/4T061539780_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Brendan Mahaney</div><div class=\"review-user-courses\">22 <span>Lessons</span></div></section></section><section class=\"review-time\">Oct 10, 2019</section>"
  },
  "3": {
    "comment": "Gracias por otra buena lección, Karen! Es un placer aprender contigo. Hasta el jueves...!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"1T068941730\"><img src=\"https://imagesavatar-static01.italki.com/1T068941730_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Trevor</div><div class=\"review-user-courses\">2 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 30, 2019</section>"
  },
  "4": {
    "comment": "Great teacher..I love her patience and lessons.",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"3T068629700\"><img src=\"https://imagesavatar-static01.italki.com/3T068629700_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Julian Cooper</div><div class=\"review-user-courses\">2 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 30, 2019</section>"
  },
  "5": {
    "comment": "Siempre una clase muy util con Karen. Estoy feliz de que la encontre en italki.",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"1T057438020\"><img src=\"https://imagesavatar-static01.italki.com/1T057438020_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Nia Chappell</div><div class=\"review-user-courses\">9 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 24, 2019</section>"
  },
  "6": {
    "comment": "¡Siempre es un gran placer estudiar con Karen!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"2T066069280\"><img src=\"https://imagesavatar-static01.italki.com/2T066069280_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Ally</div><div class=\"review-user-courses\">14 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 23, 2019</section>"
  },
  "7": {
    "comment": "Es siempre un placer hablar con Karen :)",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"7T053112850\"><img src=\"https://imagesavatar-static01.italki.com/7T053112850_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Helene</div><div class=\"review-user-courses\">7 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 23, 2019</section>"
  },
  "8": {
    "comment": "La mejor!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"4T061539780\"><img src=\"https://imagesavatar-static01.italki.com/4T061539780_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Brendan Mahaney</div><div class=\"review-user-courses\">22 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 23, 2019</section>"
  },
  "9": {
    "comment": "Gracias Karen! Hasta pronto :)",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"T048579360\"><img src=\"https://imagesavatar-static01.italki.com/T048579360_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Cassandra Larson</div><div class=\"review-user-courses\">16 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 20, 2019</section>"
  },
  "10": {
    "comment": "¡La clase fue muy divertida, útil y agradable como siempre! Muchas gracias, Karen, y nos vemos en la próxima!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"1T060413600\"><img src=\"https://imagesavatar-static01.italki.com/1T060413600_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Daniela</div><div class=\"review-user-courses\">16 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 16, 2019</section>"
  },
  "11": {
    "comment": "Una clase excelente! Karen set up a classroom environment where it was comfortable to practice Spanish conversation. She speaks slowly and clearly enough for me (a beginner) to understand. She makes good corrections and challenges the student's language appropriately.",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\"><img src=\"https://d1m3ds7i7t710d.cloudfront.net/orion/static/media/default.13c19308.svg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Julia</div><div class=\"review-user-courses\">4 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 13, 2019</section>"
  },
  "12": {
    "comment": "Gracias por una clase buena!",
    "bottomSectionHTML": "<section class=\"review-flex\"><div class=\"avatar avatar-small review-avatar avatar-placeholder\" url=\"1T036472393\"><img src=\"https://imagesavatar-static01.italki.com/1T036472393_Avatar.jpg\" alt=\"Avatar\"></div><section><div class=\"review-user-name\">Bethany</div><div class=\"review-user-courses\">2 <span>Lessons</span></div></section></section><section class=\"review-time\">Dec 9, 2019</section>"
  }
}

class Review{
  constructor(json){
    this.comment = json.comment;
    this.innerHTML = json.bottomSectionHTML;
    this.div = this.produceReviewDiv();
  }

  produceReviewDiv(){
    let div = document.createElement('div');
    div.innerHTML = `<div class="review-list-box teac-top-review show-testimonial review-absolute" style="top: 0px; left: 0px;">
    <div class="review-testimonial-star"><img src="https://d1m3ds7i7t710d.cloudfront.net/orion/static/media/star.0f1dd6bd.svg" alt="testimonial review img"><span>Testimonial</span></div>
    <div class="review-comment">${this.comment}</div>
    <div class="review-user">
      ${this.innerHTML}
    </div>
  </div>`
    return div;
  }
}

class CommentsBox{
  constructor(parentElementId){
    this.parent = document.getElementById(parentElementId);
    this.reviewsJson = reviewsJson;
    this.delay = 2000;
    this.timer = true;
  }
  refreshComment(i) {
      setTimeout(() => {
        let root = this.parent;
        let review = new Review(reviewsJson[i]);
        if (root.firstChild) root.removeChild(root.firstChild);
        root.append(review.div);
          // Do Something Here
          // Then recall the parent function to
          // create a recursive loop.
        if (reviewsJson.hasOwnProperty(i + 1)) {
          i++;
        } else {
          i = 0;
        }
        if (this.timer) this.refreshComment(i);
      }, this.delay);
  }
  setDelay(delay){
    this.delay = delay;
  }
  start(){
    this.refreshComment(0);
  }
  stop(){
    this.timer = false;
  }
}
